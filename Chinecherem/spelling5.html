<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Spelling Practice – Chinecherem Erinne</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
:root{
 --primary:#1e3a8a;
 --secondary:#2563eb;
 --accent:#0f766e;
 --card:#ffffff;
 --muted:#e5e7eb;
 --highlight:#fde68a;
}

*{box-sizing:border-box;margin:0;padding:0}

body{
 font-family:"Segoe UI",system-ui,sans-serif;
 background:linear-gradient(135deg,#e0e7ff,#f8fafc);
 padding:14px;
}

.container{
 max-width:950px;
 margin:auto;
 background:var(--card);
 padding:26px;
 border-radius:18px;
 box-shadow:0 12px 35px rgba(0,0,0,.12);
}

h1,h2,h3{text-align:center;color:var(--primary);margin-bottom:14px}

.hidden{display:none}

/* NAV */
.nav{
 display:grid;
 grid-template-columns:repeat(3,1fr);
 gap:14px;
 margin-bottom:22px;
}

.nav button{
 padding:12px;
 border-radius:14px;
 border:none;
 font-weight:700;
 color:#fff;
 cursor:pointer;
 box-shadow:0 6px 0 rgba(0,0,0,.25);
}

.nav button:active{transform:translateY(4px);box-shadow:0 2px 0 rgba(0,0,0,.25)}
.nav button:nth-child(1){background:#2563eb}
.nav button:nth-child(2){background:#0f766e}
.nav button:nth-child(3){background:#7c3aed}

/* INPUT */
input{
 width:100%;
 padding:14px;
 border-radius:14px;
 border:2px solid var(--muted);
 font-size:1rem;
 margin:18px 0;
}

/* BUTTONS */
button.action{
 padding:12px 22px;
 border-radius:14px;
 border:none;
 font-weight:700;
 color:#fff;
 cursor:pointer;
 box-shadow:0 6px 0 rgba(0,0,0,.25);
}

button.action:active{transform:translateY(4px);box-shadow:0 2px 0 rgba(0,0,0,.25)}
.primary{background:var(--secondary)}
.accent{background:var(--accent)}
.purple{background:#7c3aed}

.controls{
 display:flex;
 justify-content:center;
 gap:14px;
 flex-wrap:wrap;
 margin-top:14px;
}

.feedback{text-align:center;font-size:1.1rem;font-weight:700;margin-top:14px}

/* SCORE */
.score-box{
 text-align:center;
 font-size:2.4rem;
 font-weight:900;
 color:var(--accent);
 margin:24px 0;
}

.missed{
 background:#eef2ff;
 padding:18px;
 border-radius:16px;
}

/* ANALYTICS */
.analytics{
 display:grid;
 grid-template-columns:repeat(3,1fr);
 gap:16px;
 margin-top:22px;
}

.analytics div{
 background:#eef2ff;
 padding:20px;
 border-radius:16px;
 text-align:center;
 font-weight:700;
}

/* TABLE */
table{
 width:100%;
 border-collapse:collapse;
 margin-top:18px;
}

th,td{
 padding:12px;
 border-bottom:1px solid var(--muted);
 text-align:center;
}

th{background:#e0e7ff}

.confetti{
 position:fixed;
 inset:0;
 pointer-events:none;
 z-index:9999;
}
</style>
</head>

<body>
<div class="container">

<h1>Spelling Practice</h1>

<div class="nav">
 <button onclick="showTab('practice')">Spelling</button>
 <button onclick="showTab('analytics')">Progress Analytics</button>
 <button onclick="showTab('results')">Previous Results</button>
</div>

<!-- PRACTICE -->
<div id="practiceTab">
 <h3>Student: Chinecherem Erinne</h3>

 <input id="answer" placeholder="Type the spelling" autocorrect="off" spellcheck="false">

 <div class="controls">
  <button class="action primary" onclick="playWord()">Word</button>
  <button class="action accent" onclick="playMeaning()">Meaning</button>
  <button class="action purple" onclick="playSentence()">Sentence</button>
 </div>

 <div class="controls">
  <button class="action accent" onclick="submitAnswer()">Submit</button>
 </div>

 <div class="feedback" id="feedback"></div>
</div>

<!-- ANALYTICS -->
<div id="analyticsTab" class="hidden">
 <h2>Progress Analytics</h2>
 <div class="analytics">
  <div>Attempts<br><span id="totalAttempts">0</span></div>
  <div>Best Score<br><span id="bestScore">0%</span></div>
  <div>Average<br><span id="avgScore">0%</span></div>
 </div>
</div>

<!-- RESULTS -->
<div id="resultsTab" class="hidden">
 <h2>Previous Results</h2>
 <table>
  <thead>
   <tr><th>Date</th><th>Score</th><th>Percentage</th></tr>
  </thead>
  <tbody id="resultsTable"></tbody>
 </table>
 <div class="controls">
  <button class="action primary" onclick="retake()">Retake Spelling</button>
 </div>
</div>

<div class="score-box hidden" id="finalScore"></div>
<div class="missed hidden" id="missed"></div>

</div>

<canvas id="confettiCanvas" class="confetti hidden"></canvas>

<script>
const STUDENT_NAME="Chinecherem Erinne";

//* Firebase */
const firebaseConfig = {
  apiKey: "AIzaSyBgjLn8bw3xaIktJQxhisDnjGWv_GkJr8Y",
  authDomain: "compreh-8a519.firebaseapp.com",
  databaseURL: "https://compreh-8a519-default-rtdb.firebaseio.com",
  projectId: "compreh-8a519",
  storageBucket: "compreh-8a519.appspot.com",
  messagingSenderId: "46119679894",  // replace with your Firebase value if different
  appId: "1:46119679894:web:b5b870b047575d50a0cfb7"  // replace with your Firebase value if different
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);

// Get a reference to the database
const db = firebase.database();

/* WORDS */
const words = [
  {word:"fact", meaning:"something known to be true", sentence:"It is a fact that the Earth orbits the Sun."},
  {word:"famous", meaning:"well known", sentence:"The Eiffel Tower is a famous landmark."},
  {word:"fascinate", meaning:"to interest greatly", sentence:"Dinosaurs fascinate many children."},
  {word:"feature", meaning:"a special quality or part", sentence:"The new phone has a unique feature."},
  {word:"fierce", meaning:"strong or intense", sentence:"The tiger was fierce in the forest."},
  {word:"flexible", meaning:"able to bend easily", sentence:"Gymnasts are very flexible."},
  {word:"fortunate", meaning:"lucky", sentence:"We were fortunate to find shelter before the storm."},
  {word:"fragile", meaning:"easily broken", sentence:"The vase is fragile; handle it carefully."},
  {word:"frustrate", meaning:"to make upset or annoyed", sentence:"Traffic jams can frustrate drivers."},
  {word:"function", meaning:"the purpose or job of something", sentence:"The function of a clock is to tell time."},
  {word:"future", meaning:"time to come", sentence:"She hopes to become a doctor in the future."},
  {word:"gather", meaning:"to collect", sentence:"We gather leaves in the park during autumn."},
  {word:"generate", meaning:"to produce or create", sentence:"The machine can generate electricity."},
  {word:"genuine", meaning:"real or sincere", sentence:"He gave a genuine compliment."},
  {word:"gesture", meaning:"a movement to show feeling", sentence:"She made a kind gesture to help."},
  {word:"global", meaning:"worldwide", sentence:"Climate change is a global issue."},
  {word:"glimpse", meaning:"a quick look", sentence:"He caught a glimpse of the rare bird."},
  {word:"graceful", meaning:"moving smoothly and elegantly", sentence:"The dancer was graceful on stage."},
  {word:"grateful", meaning:"thankful", sentence:"She was grateful for the help."},
  {word:"harass", meaning:"to bother or annoy repeatedly", sentence:"Do not harass your classmates."},
  {word:"harbor", meaning:"a place for ships", sentence:"The boats stayed safe in the harbor."},
  {word:"hazard", meaning:"danger or risk", sentence:"Slippery floors are a hazard."},
  {word:"healthy", meaning:"good for health", sentence:"Eating vegetables is healthy."},
  {word:"honest", meaning:"truthful", sentence:"Always be honest with your friends."},
  {word:"humble", meaning:"modest or not proud", sentence:"He remained humble despite his success."},
  {word:"hurry", meaning:"to move fast", sentence:"We must hurry to catch the bus."},
  {word:"identify", meaning:"to recognize", sentence:"Can you identify the animal in the picture?"},
  {word:"ignore", meaning:"to pay no attention to", sentence:"Do not ignore safety rules."},
  {word:"illustrate", meaning:"to draw or show", sentence:"The book will illustrate the story with pictures."},
  {word:"imagine", meaning:"to form a picture in your mind", sentence:"Imagine a world without pollution."},
  {word:"improve", meaning:"to make better", sentence:"Practice will improve your skills."},
  {word:"include", meaning:"to be part of", sentence:"Please include all the details in your report."},
  {word:"increase", meaning:"to become larger or more", sentence:"We need to increase our reading time."},
  {word:"influence", meaning:"to affect or change", sentence:"Teachers can influence their students positively."},
  {word:"inform", meaning:"to give information", sentence:"Please inform the teacher if you are absent."},
  {word:"injure", meaning:"to hurt someone", sentence:"He injured his leg while playing soccer."},
  {word:"inquire", meaning:"to ask or seek information", sentence:"We will inquire about the new school rules."},
  {word:"insist", meaning:"to demand firmly", sentence:"She will insist on finishing her homework."},
  {word:"intense", meaning:"very strong", sentence:"The sun was intense in the afternoon."},
  {word:"interest", meaning:"curiosity or attention", sentence:"He has a great interest in science."},
  {word:"introduce", meaning:"to make known", sentence:"Let me introduce my friend to you."},
  {word:"invent", meaning:"to create something new", sentence:"Thomas Edison invented the light bulb."},
  {word:"investigate", meaning:"to examine carefully", sentence:"The police will investigate the case."},
  {word:"involve", meaning:"to include or affect", sentence:"The game will involve everyone."},
  {word:"isolate", meaning:"to separate from others", sentence:"They had to isolate the sick animal."},
  {word:"journal", meaning:"a daily record of events", sentence:"She writes in her journal every night."},
  {word:"justify", meaning:"to give a reason for", sentence:"You must justify your answer in the test."},
  {word:"keen", meaning:"eager or sharp", sentence:"He has a keen interest in music."},
  {word:"knowledge", meaning:"information and understanding", sentence:"Books give knowledge about the world."},
  {word:"labor", meaning:"work, especially physical", sentence:"Farmers do hard labor in the fields."},
  {word:"lacking", meaning:"not having enough", sentence:"The recipe is lacking sugar."},
  {word:"landscape", meaning:"an area of land as seen from a view", sentence:"The painting shows a beautiful landscape."},
  {word:"language", meaning:"a system of words for communication", sentence:"We are learning a new language in school."}
];



let i=0,score=0,missed=[];
const synth=speechSynthesis;

function speak(t){synth.speak(new SpeechSynthesisUtterance(t))}

speak("Welcome, Chinecherem Erinne! Listen carefully and spell each word you hear. You can use the other buttons to learn more about the spelling word—its meaning, how it’s used in a sentence, and to distinguish it from words that sound the same but have different meanings.");

function playWord(){speak(words[i].word)}
function playMeaning(){speak(words[i].meaning)}
function playSentence(){speak(words[i].sentence)}

function submitAnswer(){
 const a=answer.value.trim().toLowerCase();
 if(a===words[i].word){score++;feedback.textContent="Correct"}
 else{missed.push(words[i].word);feedback.textContent="Correct word: "+words[i].word}
 answer.value="";
 i++;
 if(i<words.length)setTimeout(()=>{feedback.textContent="";playWord()},900);
 else endGame();
}

function endGame(){
 const pct=Math.round(score/words.length*100);
 finalScore.textContent=`Score: ${pct}%`;
 finalScore.classList.remove("hidden");
 missed.innerHTML=missed.length?`Missed:<ul>${missed.map(w=>`<li>${w}</li>`).join("")}</ul>`:"Perfect score";
 missed.classList.remove("hidden");

 db.ref("results").push({
  student:STUDENT_NAME,
  type:"spelling",
  score,
  total:words.length,
  percentage:pct,
  timestamp:Date.now(),
  date:new Date().toLocaleString()
 });

 loadResults();
 launchConfetti();
}

function showTab(t){
 ["practice","analytics","results"].forEach(x=>{
  document.getElementById(x+"Tab").classList.add("hidden");
 });
 document.getElementById(t+"Tab").classList.remove("hidden");
}

function retake(){location.reload()}

/* LOAD RESULTS */
function loadResults(){
 db.ref("results").once("value",snap=>{
  let data=Object.values(snap.val()||{}).filter(r=>r.student===STUDENT_NAME && r.type==="spelling");
  resultsTable.innerHTML="";
  let sum=0,best=0;
  data.forEach(r=>{
   sum+=r.percentage;best=Math.max(best,r.percentage);
   resultsTable.innerHTML+=`<tr><td>${r.date}</td><td>${r.score}/${r.total}</td><td>${r.percentage}%</td></tr>`;
  });
  totalAttempts.textContent=data.length;
  bestScore.textContent=best+"%";
  avgScore.textContent=data.length?Math.round(sum/data.length)+"%":"0%";
 });
}
loadResults();

/* CONFETTI */
function launchConfetti(){
 const c=confettiCanvas,ctx=c.getContext("2d");
 c.width=innerWidth;c.height=innerHeight;
 c.classList.remove("hidden");
 const p=[...Array(200)].map(()=>({x:Math.random()*c.width,y:Math.random()*c.height,r:5,d:2+Math.random()*3,color:`hsl(${Math.random()*360},100%,50%)`}));
 setInterval(()=>{ctx.clearRect(0,0,c.width,c.height);p.forEach(o=>{ctx.beginPath();ctx.arc(o.x,o.y,o.r,0,2*Math.PI);ctx.fillStyle=o.color;ctx.fill();o.y+=o.d;if(o.y>c.height)o.y=0})},20);
}
</script>
</body>
</html>
