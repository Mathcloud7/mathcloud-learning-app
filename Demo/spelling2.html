<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Spelling Practice – Demo Student</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
:root{
 --primary:#1e3a8a;
 --secondary:#2563eb;
 --accent:#0f766e;
 --card:#ffffff;
 --muted:#e5e7eb;
 --highlight:#fde68a;
}

*{box-sizing:border-box;margin:0;padding:0}

body{
 font-family:"Segoe UI",system-ui,sans-serif;
 background:linear-gradient(135deg,#e0e7ff,#f8fafc);
 padding:14px;
}

.container{
 max-width:950px;
 margin:auto;
 background:var(--card);
 padding:26px;
 border-radius:18px;
 box-shadow:0 12px 35px rgba(0,0,0,.12);
}

h1,h2,h3{text-align:center;color:var(--primary);margin-bottom:14px}

.hidden{display:none}

/* NAV */
.nav{
 display:grid;
 grid-template-columns:repeat(3,1fr);
 gap:14px;
 margin-bottom:22px;
}

.nav button{
 padding:12px;
 border-radius:14px;
 border:none;
 font-weight:700;
 color:#fff;
 cursor:pointer;
 box-shadow:0 6px 0 rgba(0,0,0,.25);
}

.nav button:active{transform:translateY(4px);box-shadow:0 2px 0 rgba(0,0,0,.25)}
.nav button:nth-child(1){background:#2563eb}
.nav button:nth-child(2){background:#0f766e}
.nav button:nth-child(3){background:#7c3aed}

/* INPUT */
input{
 width:100%;
 padding:14px;
 border-radius:14px;
 border:2px solid var(--muted);
 font-size:1rem;
 margin:18px 0;
}

/* BUTTONS */
button.action{
 padding:12px 22px;
 border-radius:14px;
 border:none;
 font-weight:700;
 color:#fff;
 cursor:pointer;
 box-shadow:0 6px 0 rgba(0,0,0,.25);
}

button.action:active{transform:translateY(4px);box-shadow:0 2px 0 rgba(0,0,0,.25)}
.primary{background:var(--secondary)}
.accent{background:var(--accent)}
.purple{background:#7c3aed}

.controls{
 display:flex;
 justify-content:center;
 gap:14px;
 flex-wrap:wrap;
 margin-top:14px;
}

.feedback{text-align:center;font-size:1.1rem;font-weight:700;margin-top:14px}

/* SCORE */
.score-box{
 text-align:center;
 font-size:2.4rem;
 font-weight:900;
 color:var(--accent);
 margin:24px 0;
}

.missed{
 background:#eef2ff;
 padding:18px;
 border-radius:16px;
}

/* ANALYTICS */
.analytics{
 display:grid;
 grid-template-columns:repeat(3,1fr);
 gap:16px;
 margin-top:22px;
}

.analytics div{
 background:#eef2ff;
 padding:20px;
 border-radius:16px;
 text-align:center;
 font-weight:700;
}

/* TABLE */
table{
 width:100%;
 border-collapse:collapse;
 margin-top:18px;
}

th,td{
 padding:12px;
 border-bottom:1px solid var(--muted);
 text-align:center;
}

th{background:#e0e7ff}

.confetti{
 position:fixed;
 inset:0;
 pointer-events:none;
 z-index:9999;
}
</style>
</head>

<body>
<div class="container">

<h1>Spelling Practice</h1>

<div class="nav">
 <button onclick="showTab('practice')">Spelling</button>
 <button onclick="showTab('analytics')">Progress Analytics</button>
 <button onclick="showTab('results')">Previous Results</button>
</div>

<!-- PRACTICE -->
<div id="practiceTab">
 <h3>Student: Demo Student</h3>

 <input id="answer" placeholder="Type the spelling" autocorrect="off" spellcheck="false">

 <div class="controls">
  <button class="action primary" onclick="playWord()">Word</button>
  <button class="action accent" onclick="playMeaning()">Meaning</button>
  <button class="action purple" onclick="playSentence()">Sentence</button>
 </div>

 <div class="controls">
  <button class="action accent" onclick="submitAnswer()">Submit</button>
 </div>

 <div class="feedback" id="feedback"></div>
</div>

<!-- ANALYTICS -->
<div id="analyticsTab" class="hidden">
 <h2>Progress Analytics</h2>
 <div class="analytics">
  <div>Attempts<br><span id="totalAttempts">0</span></div>
  <div>Best Score<br><span id="bestScore">0%</span></div>
  <div>Average<br><span id="avgScore">0%</span></div>
 </div>
</div>

<!-- RESULTS -->
<div id="resultsTab" class="hidden">
 <h2>Previous Results</h2>
 <table>
  <thead>
   <tr><th>Date</th><th>Score</th><th>Percentage</th></tr>
  </thead>
  <tbody id="resultsTable"></tbody>
 </table>
 <div class="controls">
  <button class="action primary" onclick="retake()">Retake Spelling</button>
 </div>
</div>

<div class="score-box hidden" id="finalScore"></div>
<div class="missed hidden" id="missed"></div>

</div>

<canvas id="confettiCanvas" class="confetti hidden"></canvas>

<script>
const STUDENT_NAME="Demo Student";

/* Firebase */
const firebaseConfig = {
  apiKey: "AIzaSyBjUeQfR0p0NpchswDBuwkSoF3nTY6zSYk",
  authDomain: "project2-1ff8f.firebaseapp.com",
  databaseURL: "https://project2-1ff8f-default-rtdb.firebaseio.com",
  projectId: "project2-1ff8f",
  storageBucket: "project2-1ff8f.appspot.com",
  messagingSenderId: "777989445334",
  appId: "1:777989445334:web:3dce814bb4d896d65f9b77"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);

// Get a reference to the database
const db = firebase.database();

//* WORDS */
const words = [
  {word:"abundant", meaning:"plentiful", sentence:"The garden was full of abundant flowers."},
  {word:"adapt", meaning:"to adjust to new conditions", sentence:"Animals adapt to their environment."},
  {word:"ancient", meaning:"very old", sentence:"They visited an ancient castle."},
  {word:"approach", meaning:"to come near", sentence:"The train began to approach the station."},
  {word:"astonish", meaning:"to surprise greatly", sentence:"The magician will astonish the audience."},
  {word:"available", meaning:"able to be used", sentence:"The book is available in the library."},
  {word:"avoid", meaning:"to stay away from", sentence:"Try to avoid distractions while studying."},
  {word:"brilliant", meaning:"very bright or clever", sentence:"She had a brilliant idea."},
  {word:"calculate", meaning:"to find a number by math", sentence:"We need to calculate the total cost."},
  {word:"community", meaning:"a group of people living together", sentence:"The community organized a clean-up day."},
  {word:"complex", meaning:"having many parts", sentence:"The puzzle was complex but fun."},
  {word:"compose", meaning:"to write or create", sentence:"He will compose a new song."},
  {word:"confident", meaning:"sure of oneself", sentence:"She felt confident before the test."},
  {word:"consider", meaning:"to think about", sentence:"Consider your options carefully."},
  {word:"continue", meaning:"to keep going", sentence:"They decided to continue the journey."},
  {word:"creative", meaning:"able to make new things", sentence:"She is very creative with art projects."},
  {word:"curious", meaning:"eager to learn", sentence:"The child was curious about insects."},
  {word:"declare", meaning:"to announce", sentence:"The mayor will declare a holiday."},
  {word:"delicate", meaning:"easily broken or fragile", sentence:"Handle the vase carefully; it’s delicate."},
  {word:"describe", meaning:"to say what something is like", sentence:"Please describe your favorite toy."},
  {word:"detect", meaning:"to discover or notice", sentence:"The scientist could detect tiny particles."},
  {word:"develop", meaning:"to grow or improve", sentence:"The city plans to develop new parks."},
  {word:"efficient", meaning:"working well with little waste", sentence:"She is an efficient worker."},
  {word:"encourage", meaning:"to give support or confidence", sentence:"Teachers encourage students to ask questions."},
  {word:"essential", meaning:"very important", sentence:"Water is essential for life."},
  {word:"evaluate", meaning:"to judge the value of something", sentence:"The teacher will evaluate your work."},
  {word:"evidence", meaning:"proof or information", sentence:"The detective found evidence at the scene."},
  {word:"examine", meaning:"to look at carefully", sentence:"The doctor will examine the patient."},
  {word:"experience", meaning:"something that happens to you", sentence:"She had a great experience at camp."},
  {word:"explain", meaning:"to make clear", sentence:"Please explain your answer."},
  {word:"fortunate", meaning:"lucky", sentence:"We were fortunate to find shelter before the storm."},
  {word:"fragile", meaning:"easily broken", sentence:"The glass ornament is fragile."},
  {word:"frequent", meaning:"happening often", sentence:"We take frequent breaks while studying."},
  {word:"genuine", meaning:"real or sincere", sentence:"He gave a genuine compliment."},
  {word:"hesitate", meaning:"to pause before acting", sentence:"Don’t hesitate to ask for help."},
  {word:"ignore", meaning:"to pay no attention", sentence:"He tried to ignore the loud noise."},
  {word:"illustrate", meaning:"to draw or show", sentence:"The book will illustrate the story with pictures."},
  {word:"improve", meaning:"to make better", sentence:"Practice will improve your skills."},
  {word:"include", meaning:"to be part of", sentence:"Please include all your work in the report."},
  {word:"influence", meaning:"to affect someone or something", sentence:"Her speech will influence the students."},
  {word:"inform", meaning:"to give information", sentence:"The teacher will inform us of the results."},
  {word:"interpret", meaning:"to explain the meaning", sentence:"The guide will interpret the map for us."},
  {word:"introduce", meaning:"to make known for the first time", sentence:"I will introduce my friend to the class."},
  {word:"investigate", meaning:"to examine carefully", sentence:"The police will investigate the case."},
  {word:"involve", meaning:"to include or affect", sentence:"The project will involve everyone in the group."},
  {word:"justify", meaning:"to give a reason for", sentence:"You must justify your answer in math."},
  {word:"knowledge", meaning:"information and understanding", sentence:"Books give knowledge about the world."},
  {word:"leisure", meaning:"free time", sentence:"Reading is her favorite leisure activity."},
  {word:"maintain", meaning:"to keep in good condition", sentence:"We need to maintain the garden."},
  {word:"mature", meaning:"fully grown or developed", sentence:"The tree is mature and strong."},
  {word:"mention", meaning:"to speak about", sentence:"Don’t forget to mention your homework."},
  {word:"observe", meaning:"to watch carefully", sentence:"We observe the stars at night."},
  {word:"opportunity", meaning:"a chance to do something", sentence:"She had an opportunity to join the team."}
];



let i=0,score=0,missed=[];
const synth=speechSynthesis;

function speak(t){synth.speak(new SpeechSynthesisUtterance(t))}

speak("Welcome, Demo Student! Listen carefully and spell each word you hear. You can use the other buttons to learn more about the spelling word—its meaning, how it’s used in a sentence, and to distinguish it from words that sound the same but have different meanings.");

function playWord(){speak(words[i].word)}
function playMeaning(){speak(words[i].meaning)}
function playSentence(){speak(words[i].sentence)}

function submitAnswer(){
 const a=answer.value.trim().toLowerCase();
 if(a===words[i].word){score++;feedback.textContent="Correct"}
 else{missed.push(words[i].word);feedback.textContent="Correct word: "+words[i].word}
 answer.value="";
 i++;
 if(i<words.length)setTimeout(()=>{feedback.textContent="";playWord()},900);
 else endGame();
}

function endGame(){
 const pct=Math.round(score/words.length*100);
 finalScore.textContent=`Score: ${pct}%`;
 finalScore.classList.remove("hidden");
 missed.innerHTML=missed.length?`Missed:<ul>${missed.map(w=>`<li>${w}</li>`).join("")}</ul>`:"Perfect score";
 missed.classList.remove("hidden");

 db.ref("results").push({
  student:STUDENT_NAME,
  type:"spelling",
  score,
  total:words.length,
  percentage:pct,
  timestamp:Date.now(),
  date:new Date().toLocaleString()
 });

 loadResults();
 launchConfetti();
}

function showTab(t){
 ["practice","analytics","results"].forEach(x=>{
  document.getElementById(x+"Tab").classList.add("hidden");
 });
 document.getElementById(t+"Tab").classList.remove("hidden");
}

function retake(){location.reload()}

/* LOAD RESULTS */
function loadResults(){
 db.ref("results").once("value",snap=>{
  let data=Object.values(snap.val()||{}).filter(r=>r.student===STUDENT_NAME && r.type==="spelling");
  resultsTable.innerHTML="";
  let sum=0,best=0;
  data.forEach(r=>{
   sum+=r.percentage;best=Math.max(best,r.percentage);
   resultsTable.innerHTML+=`<tr><td>${r.date}</td><td>${r.score}/${r.total}</td><td>${r.percentage}%</td></tr>`;
  });
  totalAttempts.textContent=data.length;
  bestScore.textContent=best+"%";
  avgScore.textContent=data.length?Math.round(sum/data.length)+"%":"0%";
 });
}
loadResults();

/* CONFETTI */
function launchConfetti(){
 const c=confettiCanvas,ctx=c.getContext("2d");
 c.width=innerWidth;c.height=innerHeight;
 c.classList.remove("hidden");
 const p=[...Array(200)].map(()=>({x:Math.random()*c.width,y:Math.random()*c.height,r:5,d:2+Math.random()*3,color:`hsl(${Math.random()*360},100%,50%)`}));
 setInterval(()=>{ctx.clearRect(0,0,c.width,c.height);p.forEach(o=>{ctx.beginPath();ctx.arc(o.x,o.y,o.r,0,2*Math.PI);ctx.fillStyle=o.color;ctx.fill();o.y+=o.d;if(o.y>c.height)o.y=0})},20);
}
</script>
</body>
</html>
