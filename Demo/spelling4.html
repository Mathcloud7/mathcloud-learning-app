<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Spelling Practice – Demo Student</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
:root{
 --primary:#1e3a8a;
 --secondary:#2563eb;
 --accent:#0f766e;
 --card:#ffffff;
 --muted:#e5e7eb;
 --highlight:#fde68a;
}

*{box-sizing:border-box;margin:0;padding:0}

body{
 font-family:"Segoe UI",system-ui,sans-serif;
 background:linear-gradient(135deg,#e0e7ff,#f8fafc);
 padding:14px;
}

.container{
 max-width:950px;
 margin:auto;
 background:var(--card);
 padding:26px;
 border-radius:18px;
 box-shadow:0 12px 35px rgba(0,0,0,.12);
}

h1,h2,h3{text-align:center;color:var(--primary);margin-bottom:14px}

.hidden{display:none}

/* NAV */
.nav{
 display:grid;
 grid-template-columns:repeat(3,1fr);
 gap:14px;
 margin-bottom:22px;
}

.nav button{
 padding:12px;
 border-radius:14px;
 border:none;
 font-weight:700;
 color:#fff;
 cursor:pointer;
 box-shadow:0 6px 0 rgba(0,0,0,.25);
}

.nav button:active{transform:translateY(4px);box-shadow:0 2px 0 rgba(0,0,0,.25)}
.nav button:nth-child(1){background:#2563eb}
.nav button:nth-child(2){background:#0f766e}
.nav button:nth-child(3){background:#7c3aed}

/* INPUT */
input{
 width:100%;
 padding:14px;
 border-radius:14px;
 border:2px solid var(--muted);
 font-size:1rem;
 margin:18px 0;
}

/* BUTTONS */
button.action{
 padding:12px 22px;
 border-radius:14px;
 border:none;
 font-weight:700;
 color:#fff;
 cursor:pointer;
 box-shadow:0 6px 0 rgba(0,0,0,.25);
}

button.action:active{transform:translateY(4px);box-shadow:0 2px 0 rgba(0,0,0,.25)}
.primary{background:var(--secondary)}
.accent{background:var(--accent)}
.purple{background:#7c3aed}

.controls{
 display:flex;
 justify-content:center;
 gap:14px;
 flex-wrap:wrap;
 margin-top:14px;
}

.feedback{text-align:center;font-size:1.1rem;font-weight:700;margin-top:14px}

/* SCORE */
.score-box{
 text-align:center;
 font-size:2.4rem;
 font-weight:900;
 color:var(--accent);
 margin:24px 0;
}

.missed{
 background:#eef2ff;
 padding:18px;
 border-radius:16px;
}

/* ANALYTICS */
.analytics{
 display:grid;
 grid-template-columns:repeat(3,1fr);
 gap:16px;
 margin-top:22px;
}

.analytics div{
 background:#eef2ff;
 padding:20px;
 border-radius:16px;
 text-align:center;
 font-weight:700;
}

/* TABLE */
table{
 width:100%;
 border-collapse:collapse;
 margin-top:18px;
}

th,td{
 padding:12px;
 border-bottom:1px solid var(--muted);
 text-align:center;
}

th{background:#e0e7ff}

.confetti{
 position:fixed;
 inset:0;
 pointer-events:none;
 z-index:9999;
}
</style>
</head>

<body>
<div class="container">

<h1>Spelling Practice</h1>

<div class="nav">
 <button onclick="showTab('practice')">Spelling</button>
 <button onclick="showTab('analytics')">Progress Analytics</button>
 <button onclick="showTab('results')">Previous Results</button>
</div>

<!-- PRACTICE -->
<div id="practiceTab">
 <h3>Student: Demo Student</h3>

 <input id="answer" placeholder="Type the spelling" autocorrect="off" spellcheck="false">

 <div class="controls">
  <button class="action primary" onclick="playWord()">Word</button>
  <button class="action accent" onclick="playMeaning()">Meaning</button>
  <button class="action purple" onclick="playSentence()">Sentence</button>
 </div>

 <div class="controls">
  <button class="action accent" onclick="submitAnswer()">Submit</button>
 </div>

 <div class="feedback" id="feedback"></div>
</div>

<!-- ANALYTICS -->
<div id="analyticsTab" class="hidden">
 <h2>Progress Analytics</h2>
 <div class="analytics">
  <div>Attempts<br><span id="totalAttempts">0</span></div>
  <div>Best Score<br><span id="bestScore">0%</span></div>
  <div>Average<br><span id="avgScore">0%</span></div>
 </div>
</div>

<!-- RESULTS -->
<div id="resultsTab" class="hidden">
 <h2>Previous Results</h2>
 <table>
  <thead>
   <tr><th>Date</th><th>Score</th><th>Percentage</th></tr>
  </thead>
  <tbody id="resultsTable"></tbody>
 </table>
 <div class="controls">
  <button class="action primary" onclick="retake()">Retake Spelling</button>
 </div>
</div>

<div class="score-box hidden" id="finalScore"></div>
<div class="missed hidden" id="missed"></div>

</div>

<canvas id="confettiCanvas" class="confetti hidden"></canvas>

<script>
const STUDENT_NAME="Demo Student";

/* Firebase */
const firebaseConfig = {
  apiKey: "AIzaSyCLzYqQyETtBVTvc0pakR_gQchngQtiPjM",
  authDomain: "project4-e3233.firebaseapp.com",
  databaseURL: "https://project4-e3233-default-rtdb.firebaseio.com",
  projectId: "project4-e3233",
  storageBucket: "project4-e3233.appspot.com",
  messagingSenderId: "243254977320",
  appId: "1:243254977320:web:2511fbe1d8e488ff1ce61d"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);

// Get a reference to the database
const db = firebase.database();

/* WORDS */
const words = [
  {word:"contribute", meaning:"to give or add to", sentence:"She will contribute to the class project."},
  {word:"controversy", meaning:"disagreement or debate", sentence:"The decision caused much controversy."},
  {word:"convenient", meaning:"easy to use or access", sentence:"The store is convenient for shopping."},
  {word:"courageous", meaning:"brave", sentence:"The firefighter was courageous during the rescue."},
  {word:"critical", meaning:"very important or serious", sentence:"It is critical to follow the instructions."},
  {word:"curious", meaning:"eager to learn or know", sentence:"The child was curious about the stars."},
  {word:"decide", meaning:"to make a choice", sentence:"We must decide which game to play."},
  {word:"declare", meaning:"to announce officially", sentence:"The mayor will declare a public holiday."},
  {word:"dedicate", meaning:"to devote to a purpose", sentence:"She will dedicate her time to helping animals."},
  {word:"defend", meaning:"to protect from harm", sentence:"The knight defended the castle."},
  {word:"delightful", meaning:"very pleasing", sentence:"The garden was full of delightful flowers."},
  {word:"depend", meaning:"to rely on", sentence:"You can depend on your friends."},
  {word:"describe", meaning:"to say what something is like", sentence:"Please describe your favorite animal."},
  {word:"design", meaning:"to plan or create", sentence:"She will design a new poster for the event."},
  {word:"destroy", meaning:"to ruin completely", sentence:"The storm destroyed the old barn."},
  {word:"determine", meaning:"to decide or figure out", sentence:"We must determine the best solution."},
  {word:"develop", meaning:"to grow or improve", sentence:"The city plans to develop new parks."},
  {word:"different", meaning:"not the same", sentence:"These two books are different."},
  {word:"difficult", meaning:"hard to do", sentence:"Solving the puzzle was difficult."},
  {word:"discover", meaning:"to find something new", sentence:"They will discover a hidden cave."},
  {word:"discuss", meaning:"to talk about", sentence:"The class will discuss the story together."},
  {word:"distance", meaning:"space between two points", sentence:"The distance from home to school is long."},
  {word:"distinct", meaning:"clearly different", sentence:"The two colors are distinct."},
  {word:"disturb", meaning:"to interrupt or bother", sentence:"Please do not disturb the students."},
  {word:"divide", meaning:"to separate into parts", sentence:"We divide the cake among friends."},
  {word:"document", meaning:"a written record", sentence:"Please submit the document to the office."},
  {word:"dominate", meaning:"to have control over", sentence:"The team continues to dominate the league."},
  {word:"dramatic", meaning:"sudden or striking", sentence:"The sunset was dramatic and beautiful."},
  {word:"earnest", meaning:"serious and sincere", sentence:"She gave an earnest speech."},
  {word:"effective", meaning:"producing the desired result", sentence:"This medicine is very effective."},
  {word:"efficient", meaning:"working well without waste", sentence:"He is an efficient worker."},
  {word:"elegant", meaning:"graceful and stylish", sentence:"She wore an elegant dress."},
  {word:"eliminate", meaning:"to remove or get rid of", sentence:"We must eliminate mistakes from the essay."},
  {word:"emerge", meaning:"to come out", sentence:"The butterfly will emerge from the cocoon."},
  {word:"emphasize", meaning:"to give special importance to", sentence:"The teacher will emphasize the main points."},
  {word:"encourage", meaning:"to give support or confidence", sentence:"Parents encourage their children to try new things."},
  {word:"enormous", meaning:"very large", sentence:"The elephant is an enormous animal."},
  {word:"essential", meaning:"very important", sentence:"Water is essential for life."},
  {word:"establish", meaning:"to set up", sentence:"The school plans to establish a new library."},
  {word:"evaluate", meaning:"to judge the value of something", sentence:"We will evaluate the results carefully."},
  {word:"evidence", meaning:"proof or information", sentence:"The detective collected evidence."},
  {word:"examine", meaning:"to look at carefully", sentence:"The doctor will examine the patient."},
  {word:"excellent", meaning:"very good", sentence:"You did an excellent job on the test."},
  {word:"excite", meaning:"to make happy or eager", sentence:"The trip will excite all the students."},
  {word:"exclude", meaning:"to leave out", sentence:"Please exclude personal items from the list."},
  {word:"expand", meaning:"to increase in size", sentence:"The company plans to expand next year."},
  {word:"expect", meaning:"to think will happen", sentence:"We expect good results from the project."},
  {word:"explain", meaning:"to make clear", sentence:"Please explain your answer."},
  {word:"explore", meaning:"to travel or investigate", sentence:"We will explore the forest tomorrow."},
  {word:"express", meaning:"to show or communicate", sentence:"She will express her thoughts in a letter."},
  {word:"extend", meaning:"to make longer or bigger", sentence:"The teacher will extend the deadline."}
];



let i=0,score=0,missed=[];
const synth=speechSynthesis;

function speak(t){synth.speak(new SpeechSynthesisUtterance(t))}

speak("Welcome, Demo Student! Listen carefully and spell each word you hear. You can use the other buttons to learn more about the spelling word—its meaning, how it’s used in a sentence, and to distinguish it from words that sound the same but have different meanings.");

function playWord(){speak(words[i].word)}
function playMeaning(){speak(words[i].meaning)}
function playSentence(){speak(words[i].sentence)}

function submitAnswer(){
 const a=answer.value.trim().toLowerCase();
 if(a===words[i].word){score++;feedback.textContent="Correct"}
 else{missed.push(words[i].word);feedback.textContent="Correct word: "+words[i].word}
 answer.value="";
 i++;
 if(i<words.length)setTimeout(()=>{feedback.textContent="";playWord()},900);
 else endGame();
}

function endGame(){
 const pct=Math.round(score/words.length*100);
 finalScore.textContent=`Score: ${pct}%`;
 finalScore.classList.remove("hidden");
 missed.innerHTML=missed.length?`Missed:<ul>${missed.map(w=>`<li>${w}</li>`).join("")}</ul>`:"Perfect score";
 missed.classList.remove("hidden");

 db.ref("results").push({
  student:STUDENT_NAME,
  type:"spelling",
  score,
  total:words.length,
  percentage:pct,
  timestamp:Date.now(),
  date:new Date().toLocaleString()
 });

 loadResults();
 launchConfetti();
}

function showTab(t){
 ["practice","analytics","results"].forEach(x=>{
  document.getElementById(x+"Tab").classList.add("hidden");
 });
 document.getElementById(t+"Tab").classList.remove("hidden");
}

function retake(){location.reload()}

/* LOAD RESULTS */
function loadResults(){
 db.ref("results").once("value",snap=>{
  let data=Object.values(snap.val()||{}).filter(r=>r.student===STUDENT_NAME && r.type==="spelling");
  resultsTable.innerHTML="";
  let sum=0,best=0;
  data.forEach(r=>{
   sum+=r.percentage;best=Math.max(best,r.percentage);
   resultsTable.innerHTML+=`<tr><td>${r.date}</td><td>${r.score}/${r.total}</td><td>${r.percentage}%</td></tr>`;
  });
  totalAttempts.textContent=data.length;
  bestScore.textContent=best+"%";
  avgScore.textContent=data.length?Math.round(sum/data.length)+"%":"0%";
 });
}
loadResults();

/* CONFETTI */
function launchConfetti(){
 const c=confettiCanvas,ctx=c.getContext("2d");
 c.width=innerWidth;c.height=innerHeight;
 c.classList.remove("hidden");
 const p=[...Array(200)].map(()=>({x:Math.random()*c.width,y:Math.random()*c.height,r:5,d:2+Math.random()*3,color:`hsl(${Math.random()*360},100%,50%)`}));
 setInterval(()=>{ctx.clearRect(0,0,c.width,c.height);p.forEach(o=>{ctx.beginPath();ctx.arc(o.x,o.y,o.r,0,2*Math.PI);ctx.fillStyle=o.color;ctx.fill();o.y+=o.d;if(o.y>c.height)o.y=0})},20);
}
</script>
</body>
</html>
